/*! SegmAB, segmenting website visitors | Copyright (c) 2020-present, Andrey Veprikov | This source code is licensed under the MIT license available here - https://raw.githubusercontent.com/aveprikov/segmentation/main/LICENSE */
"use strict";(()=>{class a{constructor(a){if(!a||"object"!=typeof a||Array.isArray(a))throw new TypeError("Invalid config: expected a non-array object");const{prefix:b,segments_number:c,days:d}=a;if("string"!=typeof b||!b.length)throw new Error("\"prefix\" must be a non-empty string");if(!Number.isInteger(c)||2>c||26<c)throw new Error("\"segments_number\" must be an integer between 2 and 26");if(!Number.isInteger(d)||0>=d)throw new Error("\"days\" must be a positive integer");this.prefix=b,this.segmentsNumber=c,this.days=d}get storageKey(){return`${this.prefix}VisitorSegment`}getAlphabet(){return Array.from({length:this.segmentsNumber},(a,b)=>(10+b).toString(36).toUpperCase())}setLocalStorage(a){localStorage.setItem(this.storageKey,a),localStorage.setItem(`${this.storageKey}_expiration`,(Date.now()+864e5*this.days).toString())}getLocalStorage(){const a=parseInt(localStorage.getItem(`${this.storageKey}_expiration`),10);return Date.now()<a?localStorage.getItem(this.storageKey):(this.removeLocalStorage(),null)}removeLocalStorage(){localStorage.removeItem(this.storageKey),localStorage.removeItem(`${this.storageKey}_expiration`)}createSegment(){const a=new Date().getMilliseconds().toString(this.segmentsNumber).slice(-1),b=this.getAlphabet(),c=b[parseInt(a,this.segmentsNumber)];return this.setLocalStorage(c),c}getSegment(a){let b=this.getLocalStorage();const c=this.getAlphabet();return b&&c.includes(b)||(b=this.createSegment()),"function"==typeof a&&a(b),b}}window.segmab=(...b)=>{const[c,d]=b,e=new a(c);return e.getSegment(d)}})();