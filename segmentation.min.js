/*! SegmAB, segmenting website visitors | Copyright (c) 2020-present, Andrey Veprikov | This source code is licensed under the MIT license available here - https://raw.githubusercontent.com/aveprikov/segmentation/main/LICENSE */
'use strict';(()=>{window.segmab=window.segmab||function(){window.segmab.i=window.segmab.i||[...arguments]},Array.prototype.flat||(Array.prototype.flat=function(){let d=0==arguments.length?0:arguments[0];return 0<d?this.reduce((a,b)=>a.concat(Array.isArray(b)?b.flat(d-1):b),[]):this.slice()});let b={h(){return`${this.prefix}VisitorSegment`},g(c){let a=9;return[...Array(c)].map(()=>(++a).toString(36).toUpperCase())},s(d,a,b){window.localStorage.setItem(d,a),window.localStorage.setItem(`${d}_expiration`,(new Date().getTime()+1E3*(60*(60*(24*b)))).toString())},m(c){let a=null;return new Date().getTime()<window.localStorage.getItem(`${c}_expiration`)?a=window.localStorage.getItem(c):(this.j(c),this.j(`${c}_expiration`)),a},j(b){window.localStorage.removeItem(b)},l(c){const d=new Date;return c=this.g(c)[parseInt(d.getMilliseconds().toString(c).slice(-1),c)],this.s(this.h(),c,this.days),c},o(c){if("string"!=typeof this.prefix||0==this.prefix.length)throw"The \"prefix\" parameter shouldn't be an empty string";if("number"!=typeof this.segments_number||2>this.segments_number||26<this.segments_number||!Number.isInteger(this.segments_number))throw"The \"segments_number\" parameter should be an integer number between 2 and 26";if("number"!=typeof this.days||0>=this.days||!Number.isInteger(this.days))throw"The \"days\" parameter should be an integer number greater than zero";let a=this.m(this.h());return a&&this.g(this.segments_number).indexOf(a)+1||(a=this.l(this.segments_number)),"function"==typeof c&&c(a),a}};const a=window.segmab.i;(window.segmab=function(c){if(c=[...arguments].flat(1/0),"undefined"!=typeof c&&"undefined"!=typeof c[0])return b={...b,...c[0]},b.o(c[1])})([a])})();